{{!-- new post button and card --}}
<div class="container new-post-container">
  <a href="#" id="new-post-btn" class="btn btn-primary" style="margin-bottom: 20px;">+ New Post</a>
  <div id="new-post-form" style="display: none;" class="card login-card">
    <div class="card-header">
      <h2>New Post</h2>
    </div>
    <div class="card-body">
      <form id="create-post-form" class="form login-form">
        <div class="form-group">
          <label for="title">Title:</label>
          <input type="text" id="title" name="title" required>
        </div>
        <div class="form-group">
          <label for="content">Content:</label>
          <textarea id="new-post-content" class="w-full p-2.5" name="content" rows="5" required></textarea>
        </div>
        <button type="submit" class="btn btn-success">Submit</button>
      </form>
    </div>
  </div>
</div>


{{!-- script to show the new-post-form when the new-post-btn is clicked MOVE TO JS FOLDER --}}
<script>
  document.getElementById('new-post-btn').addEventListener('click', () => {
    const form = document.getElementById('new-post-form');
    if (form.style.display === 'none' || form.style.display === '') {
      form.style.display = 'block';
    } else {
      form.style.display = 'none';
    }
  });
</script>

{{!-- script to handle the createPostFormHandler MOVE TO JS FOLDER --}}
<script>
  document.getElementById('create-post-form').addEventListener('submit', async (event) => {
    event.preventDefault();

    const title = document.getElementById('title').value.trim();
    const content = document.getElementById('new-post-content').value.trim();

    if (title && content) {
      const response = await fetch('/api/posts', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({ title, content }),
      });

      if (response.ok) {
        document.location.reload(); // Reload the page after successful submission
      } else {
        alert('Failed to create post');
      }
    } else {
      alert('Please fill in all fields');
    }
  });
</script>